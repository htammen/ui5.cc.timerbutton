{"version":3,"file":"TimerButton.js","names":["sap","ui","define","Button","ButtonRenderer","___library","TimeoutEventType","TimerButton","extend","renderer","metadata","library","properties","timeout","type","group","defaultValue","timeoutButtonText","timeoutIcon","timeoutEventType","enabled","events","constructor","_constructor","id","settings","Button.prototype.constructor.call","this","counter","timeoutHandle","oldText","oldIcon","_timeoutHandler","setProperty","getProperty","visible","setText","_setText","sText","Button.prototype.setText.call","setEnabled","_setEnabled","bEnabled","self","setTimeout","_sTypeIconURI","Button.prototype.setEnabled.call","setVisible","_setVisible","bVisible","Button.prototype.setVisible.call"],"sources":["TimerButton.ts"],"sourcesContent":["/*!\n * ${copyright}\n */\nimport Button from \"sap/m/Button\";\n//@ts-ignore\nimport ButtonRenderer from \"sap/m/ButtonRenderer\";\nimport { TimeoutEventType } from \"./library\"\n\n/**\n * Constructor for a new <code>ui5.cc.timerbutton.TimerButton</code> control.\n *\n * This control works as folows.\n * - You set the enabled or visible property of your Button to false\n * - The control gets disabled or invisible, see property timeoutEventType\n * - if timeoutEventType === enabled\n * -- The control shows the \"timeoutIcon\" (property) instead of the original icon\n * -- after you set the enabled property of the button to true shows the \"timeoutButtonText\" (property), if defined\n * - after \"timeout\" (property) milliseconds the button gets enabled / visible and the original text and icon are shown at the button.\n * @extends Button\n *\n * @author Helmut Tammen\n * @version ${version}\n *\n * @constructor\n * @public\n * @name ui5.cc.timerbutton.TimerButton\n */\nexport default class TimerButton extends Button {\n\tprivate counter: number = 0;\n\tprivate timeoutHandle: any = null;\n\tprivate oldText: string = '';\n\tprivate oldIcon: any = null;\n\t// The following three lines were generated and should remain as-is to make TypeScript aware of the constructor signatures\n\tconstructor(id?: string | $TimerButtonSettings);\n\tconstructor(id?: string, settings?: $TimerButtonSettings);\n\tconstructor(id?: string, settings?: $TimerButtonSettings) {\n\t\tsuper(id, settings);\n\t}\n\n\tstatic readonly metadata: object = {\n\t\tlibrary: \"ui5.cc.timerbutton\",\n\t\tproperties: {\n\t\t\t/**\n\t\t\t * time in milliseconds that the control stays in disabled/invisible state after the enabled/visible property\n\t\t\t * has been set to true\n\t\t\t */\n\t\t\ttimeout: {\n\t\t\t\ttype: 'int',\n\t\t\t\tgroup: 'Misc',\n\t\t\t\tdefaultValue: 5000\n\t\t\t},\n\t\t\t/**\n\t\t\t * text that is displayed at the button in the time the enabled property has been set to true until timeout\n\t\t\t * is reached and the button is enabled again. After that time the original text of the button is displayed.\n\t\t\t */\n\t\t\ttimeoutButtonText: {\n\t\t\t\ttype: 'string',\n\t\t\t\tgroup: 'Misc',\n\t\t\t\tdefaultValue: null\n\t\t\t},\n\t\t\t/**\n\t\t\t * Icon that is displayed at the button in the time the enabled property has been set to true until timeout\n\t\t\t * is reached and the button is enabled again. After that time the original icon of the button is displayed.\n\t\t\t */\n\t\t\ttimeoutIcon: {\n\t\t\t\ttype: 'string',\n\t\t\t\tgroup: 'Misc',\n\t\t\t\tdefaultValue: 'sap-icon://pending'\n\t\t\t},\n\t\t\t/**\n\t\t\t * Event that the functionality is working with. Currently enabled and visible events are supported.\n\t\t\t */\n\t\t\ttimeoutEventType: {\n\t\t\t\ttype: \"ui5.cc.timerbutton.EventType\",\n\t\t\t\tgroup: \"Misc\",\n\t\t\t\tdefaultValue: TimeoutEventType.enabled\n\t\t\t}\n\t\t},\n\t\tevents: {\n\t\t}\n\t};\n\n\t// static renderer: typeof ButtonRenderer = ButtonRenderer;\n\tstatic renderer = ButtonRenderer\n\n\tprivate _timeoutHandler() {\n\t\tthis.counter = 0\n\t\tthis.setProperty('text', this.oldText)\n\t\tthis.setProperty('icon', this.oldIcon || null)\n\t\tthis.oldIcon = null\n\t\tswitch (this.getProperty('timeoutEventType')) {\n\t\t\tcase TimeoutEventType.enabled:\n\t\t\t\tthis.setProperty('enabled', true)\n\t\t\t\tbreak;\n\n\t\t\tcase TimeoutEventType.visible:\n\t\t\t\tthis.setProperty('visible', true)\n\t\t\t\tbreak\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetText(sText: string) {\n\t\tthis.oldText = sText\n\t\treturn super.setText(sText)\n\t}\n\n\tsetEnabled(bEnabled?: boolean): this {\n\t\tif (this.getProperty('timeoutEventType') === TimeoutEventType.enabled && bEnabled && this.getProperty('timeout') > 0) {\n\t\t\tthis.oldText = this.getProperty('text')\n\t\t\tthis.setProperty('text', this.getProperty('timeoutButtonText'))\n\t\t\tconst self = this;\n\t\t\tthis.timeoutHandle = setTimeout(function() {\n\t\t\t\tself._timeoutHandler();\n\t\t\t}, this.getProperty('timeout'));\n\t\t\treturn this;\n\t\t} else {\n\t\t\t// @ts-ignore\n\t\t\tthis.oldIcon = this.oldIcon || this.getProperty('icon') || this._sTypeIconURI\n\t\t\tthis.setProperty('icon', this.getProperty('timeoutIcon'))\n\t\t\treturn super.setEnabled(bEnabled)\n\t\t}\n\t}\n\n\tsetVisible(bVisible?: boolean): this {\n\t\tif (this.getProperty('timeoutEventType') === TimeoutEventType.visible && bVisible && this.getProperty('timeout') > 0) {\n\t\t\tthis.oldText = this.getProperty('text')\n\t\t\tthis.setProperty('text', this.getProperty('timeoutButtonText'))\n\t\t\tconst self = this;\n\t\t\tthis.timeoutHandle = setTimeout(function() {\n\t\t\t\tself._timeoutHandler();\n\t\t\t}, this.getProperty('timeout'));\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn super.setVisible(bVisible)\n\t\t}\n\t}\n}\n"],"mappings":";;;AAAA,aAAAA,IAAAC,GAAAC,OAAA,6DAAAC,EAAAC,EAAAC,GAAA,mBAMSC,EAAgBD,EAAA,oBAEzB,MAmBqBE,EAAoBJ,EAAMK,OAAA,kCAwDvCC,SAAWL,EA5CFM,SAAmB,CAClCC,QAAS,qBACTC,WAAY,CAKXC,QAAS,CACRC,KAAM,MACNC,MAAO,OACPC,aAAc,KAMfC,kBAAmB,CAClBH,KAAM,SACNC,MAAO,OACPC,aAAc,MAMfE,YAAa,CACZJ,KAAM,SACNC,MAAO,OACPC,aAAc,sBAKfG,iBAAkB,CACjBL,KAAM,+BACNC,MAAO,OACPC,aAAcV,EAAiBc,UAGjCC,OAAQ,CACR,GA5CDC,YAAW,SAAAC,EAACC,EAAaC,GACxBC,6BAAAC,KAAMH,EAAIC,GAAUE,KARbC,QAAkB,EAACD,KACnBE,cAAqB,KAAIF,KACzBG,QAAkB,GAAEH,KACpBI,QAAe,IAMvB,EAgDQC,gBAAe,SAAAA,IACtBL,KAAKC,QAAU,EACfD,KAAKM,YAAY,OAAQN,KAAKG,SAC9BH,KAAKM,YAAY,OAAQN,KAAKI,SAAW,MACzCJ,KAAKI,QAAU,KACf,OAAQJ,KAAKO,YAAY,qBACxB,KAAK5B,EAAiBc,QACrBO,KAAKM,YAAY,UAAW,MAC5B,MAED,KAAK3B,EAAiB6B,QACrBR,KAAKM,YAAY,UAAW,MAC5B,MAED,QACC,MAEH,EAEAG,QAAO,SAAAC,EAACC,GACPX,KAAKG,QAAUQ,EACf,OAAAC,yBAAAZ,KAAqBW,EACtB,EAEAE,WAAU,SAAAC,EAACC,GACV,GAAIf,KAAKO,YAAY,sBAAwB5B,EAAiBc,SAAWsB,GAAYf,KAAKO,YAAY,WAAa,EAAG,CACrHP,KAAKG,QAAUH,KAAKO,YAAY,QAChCP,KAAKM,YAAY,OAAQN,KAAKO,YAAY,sBAC1C,MAAMS,EAAOhB,KACbA,KAAKE,cAAgBe,WAAW,WAC/BD,EAAKX,iBACN,EAAGL,KAAKO,YAAY,YACpB,OAAOP,IACR,KAAO,CAENA,KAAKI,QAAUJ,KAAKI,SAAWJ,KAAKO,YAAY,SAAWP,KAAKkB,cAChElB,KAAKM,YAAY,OAAQN,KAAKO,YAAY,gBAC1C,OAAAY,4BAAAnB,KAAwBe,EACzB,CACD,EAEAK,WAAU,SAAAC,EAACC,GACV,GAAItB,KAAKO,YAAY,sBAAwB5B,EAAiB6B,SAAWc,GAAYtB,KAAKO,YAAY,WAAa,EAAG,CACrHP,KAAKG,QAAUH,KAAKO,YAAY,QAChCP,KAAKM,YAAY,OAAQN,KAAKO,YAAY,sBAC1C,MAAMS,EAAOhB,KACbA,KAAKE,cAAgBe,WAAW,WAC/BD,EAAKX,iBACN,EAAGL,KAAKO,YAAY,YACpB,OAAOP,IACR,KAAO,CACN,OAAAuB,4BAAAvB,KAAwBsB,EACzB,CACD,IAAC,OA/GmB1C,CAAW"}